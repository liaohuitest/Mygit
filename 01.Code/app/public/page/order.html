<!DOCTYPE html><html><head lang="en">    <meta charset="UTF-8">    <meta http-equiv="x-ua-compatible" content="IE=edge"/>    <meta name="viewport" content="width=device-width, initial-scale=1">    <title></title>    <link rel="stylesheet" type="text/css" href="https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css"/>    <script src="https://cdn.bootcss.com/html5shiv/3.7.3/html5shiv.min.js"></script>    <script src="https://cdn.bootcss.com/respond.js/1.4.2/respond.min.js"></script>    <!--<script src="https://unpkg.com/vue"></script>-->    <link rel="stylesheet" href="../css/order.css"/></head><body><section id="app">    <div class="serch">        <div>            <input v-if='languageFlag' v-model="serchid" placeholder="订单ID"/>            <input v-else v-model="serchid" placeholder="orderID"/>            <input v-if="languageFlag" v-model="serchcompany" placeholder="公司名称"/>            <input v-else v-model="serchcompany" placeholder="Company"/>            <input v-if="languageFlag" v-model="searchcontacter" placeholder="联系人"/>            <input v-else="searchcontacter" placeholder="Contacter"/>            <input v-if="languageFlag" v-model="searchphone" id='searchphone' placeholder="电话"/>            <input v-else v-model="searchphone" id='searchphone' placeholder="Phone"/>        </div>        <div>            <span v-if="languageFlag">订单状态：</span>            <span v-else>Order status：</span>            <select v-model="searchstatus" @change="changeFlag" class="chooseresult">                <option v-if="languageFlag" selected value="10">请选择状态</option>                <option v-else selected value="10">Please choose status</option>                <option v-if="languageFlag" value="0">待审核</option>                <option v-if="languageFlag" value="1">已审核</option>                <option v-if="languageFlag" value="4">正在部署</option>                <option v-if="languageFlag" value="5">部署完成</option>                <option v-if="languageFlag" value="7">注销中</option>                <option v-if="languageFlag" value="8">注销完成</option>                <option v-if="languageFlag" value="9">清除完成</option>                <option v-if="!languageFlag" value="0">To be audited</option>                <option v-if="!languageFlag" value="1">Audited</option>                <option v-if="!languageFlag" value="4">Being deployed</option>                <option v-if="!languageFlag" value="5">Deployment completion</option>                <option v-if="!languageFlag" value="7">In the cancellation</option>                <option v-if="!languageFlag" value="8">Already written off</option>                <option v-if="!languageFlag" value="9">Already cleared</option>            </select>        </div>        <div>            <span v-if="languageFlag">标识：</span>            <span v-else>Flag：</span>            <select v-model="searchflag" class="chooseresultflag">                <option v-if="languageFlag" selected value="10">请选择标识</option>                <option v-else selected value="10">Please choose flag</option>                <option v-for='item in arrFlag' :value="item.flag">{{item.value}}</option>            </select>            <button type="button" @click="serchContentclick" id="searchBtn" class="btn btn-info">                <span v-if="languageFlag" class="glyphicon glyphicon-search">搜索</span>                <span v-else class="glyphicon glyphicon-search">Search</span>            </button>        </div>    </div>    <div class="container-fluid mt20 ">        <div class="row">            <div class="col-lg-12 col-md-12  col-sm-12">                <table class="table table-bordered  table-condensed  table-hover text-center" style=" margin-top: 20px">                    <thead>                    <tr v-if="languageFlag">                        <td>编号</td>                        <td>公司名称</td>                        <td>联系人</td>                        <td>电话</td>                        <td>项目规模</td>                        <td>订阅期限(月)</td>                        <td>到期时间</td>                        <td>提交时间</td>                        <td>审核时间</td>                        <td>开始部署时间</td>                        <td>部署完成时间</td>                        <td>状态</td>                        <td>标识</td>                        <td>操作</td>                    </tr>                    <tr v-else>                        <td>ID</td>                        <td>Company</td>                        <td>Contacter</td>                        <td>Phone</td>                        <td>Project scale</td>                        <td>Timeout(m)</td>                        <td>Expiration date</td>                        <td>Submission time</td>                        <td>Audit time</td>                        <td>Deployment time</td>                        <td>Deployment completion</td>                        <td>Status</td>                        <td>Flag</td>                        <td>Operation</td>                    </tr>                    </thead>                    <tbody>                    <template v-for="(item,index) in NewTableData">                        <tr @click="changeopen(item)" :class="{info:item.open}">                            <td class="detail"><span @click.stop="todetail(item)">{{item.order_id}} </span></td>                            <td>{{item.customer_name}}</td>                            <td>{{item.customer_contacter}}</td>                            <td> {{item.customer_phone}}</td>                            <td v-if="item.project_scale==1"> Small</td>                            <td v-else-if="item.project_scale==2"> Middle</td>                            <td v-else-if="item.project_scale==3"> Big</td>                            <td> {{item.order_duration}}</td>                            <td> {{item.order_expiredtime}}</td>                            <td> {{item.order_submittime}}</td>                            <td> {{item.audit_time}}</td>                            <td> {{item.deploy_begintime}}</td>                            <td> {{item.deploy_endtime}}</td>                            <td v-if="languageFlag && item.order_status==0">待审核</td>                            <td v-else-if="languageFlag && item.order_status==1">已审核</td>                            <td v-else-if="languageFlag && item.order_status==2">正在部署E</td>                            <td v-else-if="languageFlag && item.order_status==3">E部署完成</td>                            <td v-else-if="languageFlag && item.order_status==4">正在部署应用</td>                            <td v-else-if="languageFlag && item.order_status==5">应用部署完成</td>                            <td v-else-if="languageFlag && item.order_status==6">待注销</td>                            <td v-else-if="languageFlag && item.order_status==7">注销中</td>                            <td v-else-if="languageFlag && item.order_status==8">注销完成</td>                            <td v-else-if="languageFlag && item.order_status==9">清除完成</td>                            <td v-else-if="languageFlag && item.order_status==10">清除中</td>                            <td v-if="languageFlag && item.result_flag==0">未通过</td>                            <td v-else-if="languageFlag && item.result_flag==1">通过</td>                            <td v-else-if="languageFlag && item.result_flag==2">失败</td>                            <td v-else-if="languageFlag && item.result_flag==3">成功</td>                            <td v-else-if="languageFlag && item.result_flag!=0 &&item.result_flag!=1&&item.result_flag!=2                          &&item.result_flag!=3"></td>                            <td v-if="!languageFlag && item.order_status==0">To be audited</td>                            <td v-else-if="!languageFlag && item.order_status==1">Audited</td>                            <td v-else-if="!languageFlag && item.order_status==2">正在部署E</td>                            <td v-else-if="!languageFlag && item.order_status==3">E部署完成</td>                            <td v-else-if="!languageFlag && item.order_status==4">Deploying applications</td>                            <td v-else-if="!languageFlag && item.order_status==5">Deployment completion</td>                            <td v-else-if="!languageFlag && item.order_status==6">待注销</td>                            <td v-else-if="!languageFlag && item.order_status==7">In the cancellation</td>                            <td v-else-if="!languageFlag && item.order_status==8">Already written off</td>                            <td v-else-if="!languageFlag && item.order_status==9">Already cleared</td>                            <td v-else-if="!languageFlag && item.order_status==10">In the process of clearing</td>                            <td v-if="!languageFlag && item.result_flag==0">Not through</td>                            <td v-else-if="!languageFlag && item.result_flag==1">adopt</td>                            <td v-else-if="!languageFlag && item.result_flag==2">Faile</td>                            <td v-else-if="!languageFlag && item.result_flag==3">Success</td>                            <td v-else-if="!languageFlag && item.result_flag!=0 &&item.result_flag!=1&&item.result_flag!=2                          &&item.result_flag!=3"></td>                            <td>                                <button :disabled='bool'                                        v-if="item.order_status==5 && languageFlag && item.result_flag == 3"                                        type="button" @click="deleorder(item)"                                        class="destroy btn "                                        data-toggle="modal" data-dismiss="modal"                                        data-target="#deleModal">                                    <span>注销</span>                                </button>                                <button :disabled='bool'                                        v-if="item.order_status==5 && languageFlag && item.result_flag == 2"                                        type="button" @click="deleorder(item)"                                        class="destroy btn "                                        data-toggle="modal" data-dismiss="modal"                                        data-target="#deleModal">                                    <span>清除</span>                                </button>                                <button :disabled='bool'                                        v-if="item.order_status==5 && !languageFlag && item.result_flag == 2"                                        type="button" @click="deleorder(item)"                                        class="destroy btn "                                        data-toggle="modal" data-dismiss="modal"                                        data-target="#deleModal">                                    <span> Clear</span>                                </button>                                <button :disabled='bool'                                        v-if="item.order_status==5 && !languageFlag && item.result_flag == 3"                                        type="button" @click="deleorder(item)"                                        class="destroy btn "                                        data-toggle="modal" data-dismiss="modal"                                        data-target="#deleModal">                                    <span> Cancellation</span>                                </button>                                <button :disabled='bool'                                        v-else-if="item.order_status== 0 && item.result_flag == null && languageFlag"                                        type="button"                                        class="check btn " @click="checkorder(item)" data-toggle="modal"                                        data-dismiss="modal"                                        data-target="#checkModal">审核                                </button>                                <button :disabled='bool'                                        v-else-if="item.order_status== 9 && item.result_flag == 3 && languageFlag"                                        type="button"                                        class="check btn " @click="checkorder(item)" data-toggle="modal"                                        data-dismiss="modal"                                        data-target="#checkModal">审核                                </button>                                <button :disabled='bool'                                        v-else-if="item.order_status== 0 && item.result_flag == null && !languageFlag"                                        type="button"                                        class="check btn " @click="checkorder(item)" data-toggle="modal"                                        data-dismiss="modal"                                        data-target="#checkModal">To examine                                </button>                                <button :disabled='bool'                                        v-else-if="item.order_status== 9 && item.result_flag == 3 && !languageFlag"                                        type="button"                                        class="check btn " @click="checkorder(item)" data-toggle="modal"                                        data-dismiss="modal"                                        data-target="#checkModal">To examine                                </button>                            </td>                        </tr>                        <tr v-if="item.open">                            <td colspan="15">                                <table class="table table-bordered  table-condensed  table-hover text-center "                                       style=" margin-top: 10px;width:95%;margin-left: 30px;">                                    <thead>                                    <tr v-if="languageFlag">                                        <td>订单产品记录ID</td>                                        <td>产品名称</td>                                        <td>产品状态</td>                                        <td>开始部署</td>                                        <td>完成部署</td>                                        <td>处理结果标识</td>                                        <td>处理结果描述</td>                                        <td>操作</td>                                    </tr>                                    <tr v-else>                                        <td>Orderid</td>                                        <td>Productname</td>                                        <td>Productstatu</td>                                        <td>Begindeploy</td>                                        <td>Complete</td>                                        <td>Result</td>                                        <td>Resultsdes</td>                                        <td>Operation</td>                                    </tr>                                    </thead>                                    <tbody v-for="(key,i) in arrproducts">                                    <tr>                                        <td><span>{{key.op_id}} </span></td>                                        <td> {{key.product_name}}</td>                                        <td v-if="languageFlag && key.deploy_status == 0"> 待审核</td>                                        <td v-else-if="languageFlag &&key.deploy_status == 1"> 等待部署</td>                                        <td v-else-if="languageFlag &&key.deploy_status == 4"> 正在部署</td>                                        <td v-else-if="languageFlag &&key.deploy_status == 5">部署完成</td>                                        <td v-else-if="languageFlag &&key.deploy_status == 98">无效</td>                                        <td v-else-if="languageFlag &&key.deploy_status == 7">注销中</td>                                        <td v-else-if="languageFlag &&key.deploy_status == 10">清除中</td>                                        <td v-else-if="languageFlag &&key.deploy_status == 9">清除完成</td>                                        <td v-else-if="languageFlag &&key.deploy_status == 99">失败</td>                                        <td v-else-if="languageFlag &&key.deploy_status == 100">已注销</td>                                        <td v-if="!languageFlag && key.deploy_status == 0"> To be audited</td>                                        <td v-else-if="!languageFlag &&key.deploy_status == 1"> Wait for deployment</td>                                        <td v-else-if="!languageFlag &&key.deploy_status == 4"> Being deployed</td>                                        <td v-else-if="!languageFlag &&key.deploy_status == 5">Deployment completion                                        </td>                                        <td v-else-if="!languageFlag &&key.deploy_status == 98">invalid</td>                                        <td v-else-if="!languageFlag &&key.deploy_status == 7">In the cancellation</td>                                        <td v-else-if="!languageFlag &&key.deploy_status == 10">In the process of clearing</td>                                        <td v-else-if="!languageFlag &&key.deploy_status == 9">Already cleared</td>                                        <td v-else-if="!languageFlag &&key.deploy_status == 99">Faile</td>                                        <td v-else-if="!languageFlag &&key.deploy_status == 100">Already written off                                        </td>                                        <td> {{key.deploy_begintime}}</td>                                        <td> {{key.deploy_endtime}}</td>                                        <td v-if="key.result_flag==0">未通过</td>                                        <td v-else-if="key.result_flag==1">通过</td>                                        <td v-else-if="key.result_flag==2">失败</td>                                        <td v-else-if="key.result_flag==3">成功</td>                                        <td v-else></td>                                        <td> {{key.result_description}}</td>                                        <td>                                            <button type="button" class="bianji btn btn-info"                                                    data-toggle="modal" data-dismiss="modal"                                                    data-target="#detailModal" @click="productDetail(i)">                                                <span v-if="languageFlag">详情</span>                                                <span v-else>Detail</span>                                            </button>                                        </td>                                    </tr>                                    </tbody>                                </table>                            </td>                        </tr>                    </template>                    </tbody>                </table>                <!--翻页-->                <div v-if="pageTotal!=0" class="row class-nav-ul">                    <nav aria-label="Page navigation">                        <ul class="pagination">                            <li>                                <a href="#" aria-label="Previous" @click="previous">                                    <span aria-hidden="true">&laquo;</span>                                </a>                            </li>                            <li class="active page1"><a href="#">{{pageNow}}/{{pageTotal}}</a></li>                            <li>                                <a href="#" aria-label="Next" @click="next">                                    <span aria-hidden="true">&raquo;</span>                                </a>                            </li>                        </ul>                    </nav>                </div>            </div>        </div>    </div>    <!--审核模态框-->    <div class="modal fade" id="checkModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"         aria-hidden="true">        <div class="modal-dialog">            <div class="modal-content">                <div class="modal-header">                    <button type="button" class="close" data-dismiss="modal"                            aria-label="Close"><span                            aria-hidden="true">&times;</span></button>                    <h4 v-if="languageFlag" class="modal-title">订单审核</h4>                    <h4 v-else class="modal-title">Order audit</h4>                </div>                <div class="modal-body">                    <div class="slectcheck">                        <div v-if="languageFlag">审核结果：</div>                        <div v-else>Findings of audit：</div>                        <div>                            <select @click="cha" v-model="slected" id="result">                                <option v-if="languageFlag" slected value="2">请选择...</option>                                <option v-else slected value="2">Please choose...</option>                                <option v-if="languageFlag" value="1">通过</option>                                <option v-if="languageFlag" value="0">不通过</option>                                <option v-if="!languageFlag" value="1">adopt</option>                                <option v-if="!languageFlag" value="0">Not allowed to pass</option>                            </select>                        </div>                    </div>                    <div class="infoCheck">{{info}}</div>                    <div class="checkspeak">                        <div v-if="languageFlag"> 审核意见：</div>                        <div v-else> Audit opinion：</div>                        <textarea @keyup="clearContent" v-model="checkcontent" name="" id="checkarea" cols="60"                                  rows="10">                        </textarea>                    </div>                </div>                <div class="modal-footer">                    <button type="button" class="btn btn-default" data-dismiss="modal">                        <span v-if="languageFlag">关闭</span>                        <span v-else>Close</span>                    </button>                    <button type="button" @click="checkordersure" class="btn btn-primary">                        <span v-if="languageFlag">提交</span>                        <span v-else>Submit</span>                    </button>                </div>            </div>        </div>    </div>    <!--组件部署详情-->    <div class="modal fade" id="detailModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"         aria-hidden="true">        <div class="modal-dialog" style="width: 1100px">            <div class="modal-content">                <div class="modal-header">                    <button type="button" class="close" data-dismiss="modal"                            aria-label="Close"><span                            aria-hidden="true">&times;</span></button>                    <h4 class="modal-title" id="ModalLabel">                        <span v-if="languageFlag">订单组件部署详情</span>                        <span v-else>Order component deployment details</span>                    </h4>                </div>                <div class="modal-body">                    <table class="table table-bordered  table-condensed  table-hover text-center "                           style=" margin-top: 10px">                        <thead>                        <tr v-if="languageFlag">                            <td>组件ID</td>                            <td>组件代码</td>                            <td>组件名称</td>                            <td>组件类型</td>                            <td>EC2实例记录ID</td>                            <td>EC2实例ID</td>                            <td>EC2实例名称</td>                            <td>WEB类应用程序URL</td>                        </tr>                        <tr v-else>                            <td>Component ID</td>                            <td>Component code</td>                            <td>Component name</td>                            <td>Component type</td>                            <td>EC2 Record ID</td>                            <td>EC2 ID</td>                            <td>EC2 name</td>                            <td>WEB URL</td>                        </tr>                        </thead>                        <tbody>                        <tr v-for="item in arrEC2">                            <td> {{item.component_id}}</td>                            <td> {{item.component_code}}</td>                            <td> {{item.component_name}}</td>                            <td v-if="item.component_type==1"> SBI</td>                            <td v-else-if="item.component_type==2"> NBI</td>                            <td v-else-if="item.component_type==3"> Web</td>                            <td> {{item.eci_id}}</td>                            <td> {{item.instance_id}}</td>                            <td> {{item.instance_name}}</td>                            <td><a :href="item.deploy_url" target="_blank">{{item.deploy_url}}</a></td>                        </tr>                        </tbody>                    </table>                </div>                <div class="modal-footer">                    <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>                </div>            </div>        </div>    </div>    <!-- 删除模态框-->    <div class="modal fade" id="deleModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"         aria-hidden="true">        <div class="modal-dialog">            <div class="modal-content">                <div class="modal-header">                    <button type="button" class="close" data-dismiss="modal"                            aria-label="Close"><span                            aria-hidden="true">&times;</span></button>                    <h4 class="modal-title" id="deleModalLabel">                        <span v-if="languageFlag && !deployFlag ">请输入清除原因</span>                        <span v-if="languageFlag &&  deployFlag">请输入注销原因</span>                        <span v-if="!languageFlag && !deployFlag">Please enter the reasons for the clear</span>                        <span v-if="!languageFlag && deployFlag">Please enter the reasons for the cancellation</span>                    </h4>                </div>                <div class="modal-body">                    <div class="checkspeak">                        <div v-if="languageFlag && !deployFlag"> 清除原因：</div>                        <div v-if="languageFlag &&  deployFlag"> 注销原因：</div>                        <div v-if="!languageFlag && !deployFlag"> Cause of clear：</div>                        <div v-if="!languageFlag && deployFlag"> Cause of cancellation：</div>                        <textarea @keyup='cleardeleContent' v-model="deleordercontent" id='delearea' cols="60" rows="9">                        </textarea>                        <div class="infoCheck">{{deleInfo}}</div>                    </div>                </div>                <div class="modal-footer">                    <button type="button" class="btn btn-default guanbi" data-dismiss="modal">                        <span>取消</span>                        <span v-else>Cancel</span>                    </button>                    <button type="button" class="btn btn-primary bianjisave" @click="deleordersure">                        <span v-if="languageFlag">提交</span>                        <span v-else>Submit</span>                    </button>                </div>            </div>        </div>    </div>    <!-- 搜索不出模态框-->    <div class="modal fade" id="bucunModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"         aria-hidden="true">        <div class="modal-dialog" style="width: 400px">            <div class="modal-content">                <div class="modal-header">                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span                            aria-hidden="true">&times;</span></button>                    <h4 class="modal-title" id="bucunModalLabel">您好！您搜索的订单不存在</h4>                </div>                <div class="modal-footer">                    <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>                    <button type="button" class="btn btn-primary" data-dismiss="modal">确定</button>                </div>            </div>        </div>    </div></section><script src="../lib/vue.min.js"></script><script src="../lib/jquery-2.1.1.js"></script><script>    $(function () {        var user = window.sessionStorage.getItem("user");        if (!user) {            window.location.href = '/page/login.html'        }        $('#checkModal').modal({            show: false,            backdrop: 'static'        });        $('#deleModal').modal({            show: false,            backdrop: 'static'        });    })</script><script>    var app = new Vue({        el: '#app',        data: {            languageFlag: false,            deleInfo: "",            info: "",            bool: true,            serchid: '',            serchcompany: '',            searchcontacter: '',            searchphone: '',            searchstatus: '10',            searchflag: '10',            arrFlag: [],            slected: "2",            checkcontent: '',            deleordercontent: "",            orderid: '',            isblue: true,            arrorder: [],            arrproducts: [],            arrEC2: [],            pageTotal: "",            pageNow: 1,            userflag: "",            deployFlag: false        },        computed: {            NewTableData: function () {                var searchid = this.serchid;                var searchcompany = this.serchcompany;                var searchcontacter = this.searchcontacter;                var searchphone = this.searchphone;                var searchstatus = this.searchstatus;                if (searchid) {                    return this.arrorder.filter(function (product) {                        return Object.keys(product).some(function (key) {                            if (key == 'order_id') {                                var obj = String(product[key]);                            }                            return String(obj).toLowerCase().indexOf(searchid.toLowerCase()) > -1                        })                    })                } else if (searchcompany) {                    return this.arrorder.filter(function (product) {                        return Object.keys(product).some(function (key) {                            if (key == 'customer_name') {                                var obj = String(product[key]);                            }                            return String(obj).toLowerCase().indexOf(searchcompany.toLowerCase()) > -1                        })                    })                } else if (searchcontacter) {                    return this.arrorder.filter(function (product) {                        return Object.keys(product).some(function (key) {                            if (key == 'customer_contacter') {                                var obj = String(product[key]);                            }                            return String(obj).toLowerCase().indexOf(searchcontacter.toLowerCase()) > -1                        })                    })                } else if (searchphone) {                    return this.arrorder.filter(function (product) {                        return Object.keys(product).some(function (key) {                            if (key == 'customer_phone') {                                var obj = String(product[key]);                            }                            return String(obj).toLowerCase().indexOf(searchphone.toLowerCase()) > -1                        })                    })                }                return this.arrorder;            }        },        methods: {            changeFlag() {                this.searchflag = 10;                if (this.searchstatus == '10' || this.searchstatus == '0' || this.searchstatus == '4' || this.searchstatus == '7') {                    this.arrFlag = []                } else if (this.searchstatus == '1') {                    if (this.languageFlag) {                        this.arrFlag = [{flag: 0, value: "未通过"}, {flag: 1, value: "通过"}]                    } else {                        this.arrFlag = [{flag: 0, value: "Not through"}, {flag: 1, value: "Adopt"}]                    }                } else if (this.searchstatus == '5' || this.searchstatus == '8' ||this.searchstatus == '9') {                    if (this.languageFlag) {                        this.arrFlag = [{flag: 2, value: "失败"}, {flag: 3, value: "成功"}]                    } else {                        this.arrFlag = [{flag: 2, value: "Faile"}, {flag: 3, value: "Success"}]                    }                }            },            serchCountTotal() {                _this = this;                $.ajax({                    url: "/serpagetotal.do",                    data: {                        id: _this.serchid, contacter: _this.searchcontacter, company: _this.serchcompany,                        phone: _this.searchphone, searchstatus: _this.searchstatus, searchflag: _this.searchflag                    },                    type: 'post',                    success: function (data) {                        _this.pageTotal = data                    }                })            },            serchContent() {                this.serchCountTotal();                var _this = this;                $.ajax({                    url: '/getorder.do',                    type: 'post',                    data: {                        id: _this.serchid,                        page: _this.pageNow,                        contacter: _this.searchcontacter,                        company: _this.serchcompany,                        phone: _this.searchphone,                        searchstatus: _this.searchstatus,                        searchflag: _this.searchflag                    },                    success: function (data) {                        for (let i  in  data) {                            data[i].open = false                        }                        _this.arrorder = data                    }                })            },            serchContentclick() {                this.pageNow = 1;                this.serchCountTotal();                var _this = this;                $.ajax({                    url: '/getorder.do',                    type: 'post',                    data: {                        id: _this.serchid,                        page: _this.pageNow,                        contacter: _this.searchcontacter,                        company: _this.serchcompany,                        phone: _this.searchphone,                        searchstatus: _this.searchstatus,                        searchflag: _this.searchflag                    },                    success: function (data) {                        if (data != 'none') {                            for (let i  in  data) {                                data[i].open = false                            }                            _this.arrorder = data                        } else {                            _this.arrorder = []                        }                    }                })            },            previous() {                this.pageNow--;                if (this.pageNow == 0) {                    this.pageNow = 1                }                this.serchContent()            },            next() {                this.pageNow++;                if (this.pageNow > this.pageTotal) {                    this.pageNow = this.pageTotal                }                this.serchContent()            },            cha() {                this.info = ''            },            clearContent() {                this.info = ''            },            cleardeleContent() {                this.deleInfo = ''            },            checkorder(item) {                this.slected = '2';                this.info = '';                this.orderid = item.order_id;                this.checkcontent = ""            },            deleorder(item) {                this.orderid = item.order_id;                this.deleordercontent = "";                if (item.result_flag == '2') {                    this.deployFlag = false                } else {                    this.deployFlag = true                }            },            checkordersure() {                var user = window.sessionStorage.getItem('user');                var _this = this;                var today = new Date();                var year = today.getFullYear();                var month = today.getMonth() + 1;                var day = today.getDate();                var h = today.getHours();                var m = today.getMinutes();                var s = today.getSeconds();                var nowtime = year + '/' + month + '/' + day + "" + h + ':' + m + ':' + s;                if (this.slected == 2) {                    this.info = this.languageFlag ? "Error：请选择审核结果" : "Error:Please select the results of the audit!"                    return false                } else if (this.checkcontent == "") {                    this.info = this.languageFlag ? "Error：请输入审核意见！" : 'Error:Please enter the audit opinion!'                    return false                } else {                    $('#checkModal').modal('hide');                    $.ajax({                        url: '/passcheck.do',                        data: {id: _this.orderid, content: _this.checkcontent, result: _this.slected, user: user},                        type: 'post',                        success: function (data) {                            if (data == 'checksuccess') {                                for (var i in _this.arrorder) {                                    if (_this.arrorder[i].order_id == _this.orderid) {                                        _this.arrorder[i].order_status = 1;                                        _this.arrorder[i].audit_time = nowtime;                                        _this.arrorder[i].result_flag = 1;                                    }                                }                                for (var i  in _this.arrproducts) {                                    _this.arrproducts[i].deploy_status = 1                                    _this.arrproducts[i].result_flag = 1;                                    _this.arrproducts[i].result_description = _this.checkcontent                                }                            } else if (data == 'checkfail') {                                for (var i in _this.arrorder) {                                    if (_this.arrorder[i].order_id == _this.orderid) {                                        _this.arrorder[i].order_status = 1;                                        _this.arrorder[i].result_flag = 0;                                        _this.arrorder[i].audit_time = nowtime;                                    }                                }                                for (var i  in _this.arrproducts) {                                    _this.arrproducts[i].deploy_status = 98;                                    _this.arrproducts[i].result_flag = 0;                                    _this.arrproducts[i].result_description = _this.checkcontent                                }                            }                        }                    })                }            },            deleordersure() {                var user = window.sessionStorage.getItem('user');                var _this = this;                if (this.deleordercontent == '') {                    this.deleInfo = this.languageFlag ? ' "Error：请输入原因！"' : 'Error：Please enter the reasons for the cancellation!';                    return false                } else {                    $('#deleModal').modal('hide');                    $.ajax({                        url: "/deletstack.do",                        type: "post",                        data: {                            orderid: _this.orderid,                            user: user,                            content: _this.deleordercontent,                            deployFlag: _this.deployFlag                        },                        success: function (data) {                            if (data == 'deleOk') {                                for (var i = 0; i < _this.arrorder.length; i++) {                                    if (_this.arrorder[i].order_id == _this.orderid) {                                        if(_this.deployFlag){                                            _this.arrorder[i].order_status = 7;                                        }else {                                            _this.arrorder[i].order_status = 10;                                        }                                        _this.arrorder[i].result_flag = 4;                                    }                                }                                for (var i  in  _this.arrproducts) {                                    if(_this.deployFlag){                                        _this.arrproducts[i].deploy_status = 7;                                    }else {                                        _this.arrproducts[i].deploy_status = 10;                                    }                                    _this.arrproducts[i].result_flag = 4;                                    _this.arrproducts[i].result_description = _this.deleordercontent                                }                            }                        }                    })                }            },            changeopen(item) {                var _this = this                if (item.open == false) {                    for (var i = 0; i < this.arrorder.length; i++) {                        this.arrorder[i].open = false                    }                    $.ajax({                        url: '/productsinfo.do',                        type: 'get',                        data: {productID: item.order_id},                        dataType: 'json',                        success: function (data) {                            _this.arrproducts = data                        }                    })                    item.open = true                } else {                    item.open = false                }            },            productDetail(index) {                var _this = this;                $.ajax({                    url: '/productdetail.do',                    data: {id: _this.arrproducts[index].op_id},                    type: 'get',                    dataType: 'json',                    success: function (data) {                        if (data != 0) {                            _this.arrEC2 = data                        } else {                            _this.arrEC2 = []                        }                    }                })            },            todetail(item) {                window.location.href = 'orderdetail.html?a=' + JSON.stringify(item);            },        },        created() {            this.serchContent();            if (window.sessionStorage.getItem('language') == 'chinese') {                this.languageFlag = true            } else if (window.sessionStorage.getItem('language') == 'english') {                this.languageFlag = false            }            this.user = JSON.parse(window.sessionStorage.getItem('user'));            if (this.user.user_flag == 0) {                this.bool = true            } else if (this.user.user_flag == 1 || this.user.user_flag == 2) {                this.bool = false            }        }    })</script><script src="../lib/bootstrap.js"></script></body></html>